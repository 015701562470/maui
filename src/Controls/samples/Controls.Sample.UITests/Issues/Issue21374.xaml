<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="Maui.Controls.Sample.Issues.Issue21374"
    xmlns:viewModels="clr-namespace:Maui.Controls.Sample.Issues"
    Title="Issue 21374">
  <ContentPage.BindingContext>
    <viewModels:Issue21374ViewModel />
  </ContentPage.BindingContext>
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Button   
      Grid.Row="0"
      AutomationId="WaitForStubControl"
      Command="{Binding PopulateItemsCommand}"
      Text="Populate items" />
    <Grid
        Grid.Row="1">
      <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>
      <CollectionView  
        Grid.Row="0" 
        ItemsSource="{Binding Items}">
        <CollectionView.ItemTemplate>
          <DataTemplate>
            <StackLayout              
              Padding="8"
              Orientation="Horizontal"
              Spacing="16">
              <Label 
                Text="{Binding Text}" />
            </StackLayout>
          </DataTemplate>
        </CollectionView.ItemTemplate>
      </CollectionView>
      <Label 
        Grid.Row="1"
        AutomationId="Success"
        Text="{Binding Success}"/>
    </Grid>
  </Grid>
</ContentPage>